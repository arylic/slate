
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Arylic Audio TCP API Interface</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-68578f73.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-0d08f411.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-a9fde460.js"></script>

  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-68ceac22.png" class="logo" alt="" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#tcp-api" class="toc-h1 toc-link" data-title="TCP API">TCP API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#connection" class="toc-h2 toc-link" data-title="Connection">Connection</a>
                  </li>
                  <li>
                    <a href="#data-format" class="toc-h2 toc-link" data-title="Data format">Data format</a>
                  </li>
                  <li>
                    <a href="#payload" class="toc-h2 toc-link" data-title="Payload">Payload</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#device-information" class="toc-h1 toc-link" data-title="Device Information">Device Information</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#basic-information" class="toc-h2 toc-link" data-title="Basic Information">Basic Information</a>
                  </li>
                  <li>
                    <a href="#more-information" class="toc-h2 toc-link" data-title="More Information">More Information</a>
                  </li>
                  <li>
                    <a href="#network-state" class="toc-h2 toc-link" data-title="Network State">Network State</a>
                  </li>
                  <li>
                    <a href="#usb-disk" class="toc-h2 toc-link" data-title="USB Disk">USB Disk</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#device-control" class="toc-h1 toc-link" data-title="Device control">Device control</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#volume" class="toc-h2 toc-link" data-title="Volume">Volume</a>
                  </li>
                  <li>
                    <a href="#mute" class="toc-h2 toc-link" data-title="Mute">Mute</a>
                  </li>
                  <li>
                    <a href="#device-name" class="toc-h2 toc-link" data-title="Device Name">Device Name</a>
                  </li>
                  <li>
                    <a href="#device-reboot" class="toc-h2 toc-link" data-title="Device Reboot">Device Reboot</a>
                  </li>
                  <li>
                    <a href="#reset-factory-settings" class="toc-h2 toc-link" data-title="Reset Factory Settings">Reset Factory Settings</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#playback-control" class="toc-h1 toc-link" data-title="Playback Control">Playback Control</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#playback-control-2" class="toc-h2 toc-link" data-title="Playback Control">Playback Control</a>
                  </li>
                  <li>
                    <a href="#playback-mode" class="toc-h2 toc-link" data-title="Playback Mode">Playback Mode</a>
                  </li>
                  <li>
                    <a href="#preset" class="toc-h2 toc-link" data-title="Preset">Preset</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#playback-information" class="toc-h1 toc-link" data-title="Playback Information">Playback Information</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#current-input-mode" class="toc-h2 toc-link" data-title="Current Input Mode">Current Input Mode</a>
                  </li>
                  <li>
                    <a href="#media-information" class="toc-h2 toc-link" data-title="Media Information">Media Information</a>
                  </li>
                  <li>
                    <a href="#spotify-status" class="toc-h2 toc-link" data-title="Spotify Status">Spotify Status</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#passthrough-function" class="toc-h1 toc-link" data-title="Passthrough Function">Passthrough Function</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#extended-eq-function" class="toc-h2 toc-link" data-title="Extended EQ function">Extended EQ function</a>
                  </li>
                  <li>
                    <a href="#ap8064-platform" class="toc-h2 toc-link" data-title="AP8064 platform">AP8064 platform</a>
                  </li>
                  <li>
                    <a href="#bp10xx-platform" class="toc-h2 toc-link" data-title="BP10XX platform">BP10XX platform</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li>v1.0.0<br>Made with ❤️ by<br><a href='https://woodbytes.me' target='_blank'>Woodbytes</a> and <a href="https://www.facebook.com/NWT.Stuff" target="_blank">NWT.Stuff</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='tcp-api'>TCP API</h1>
<p>Welcome to Arylic&#39;s TCP API developer documentation.  </p>

<p>The Query and Control Interface is supported by standard TCP/IP Sockets.  So unique socket identification on the LAN/WLAN is the pair of the Arylic Device IP Address and the Communication Port. The creation and management of TCP/IP Sockets is no covered in the Scope of this document as this can found in many places on the Internet and in books. </p>

<p>It is a strong recommendation to familise yourself with the Arylic &quot;Web Management Interface&quot;.  This will enable you to configure the IP address of your Arylic Device and also configure the communications Port for the TCP/IP Socket if required.</p>

<p>Arylic provide a simple <a href="https://developer.arylic.com/download/uart_passthrough_test.zip">development Tool</a> for Windows. You can evaluate these commands without any coding. </p>

<p>The API is working in bi-directional, which means device would send message to TCP client when its status changed. For example, user adjust volume on APP or with remote. The TCP client would receive the volume change message.</p>
<h2 id='connection'>Connection</h2>
<p>The client could connect to device via <code>TCP</code> method on port <code>8899</code>, and the connection could be remained for sending or receiving data in the future.</p>

<aside class="notice">
Please send the commands with interval for at least 200ms. 
</aside>

<aside class="notice">
Limited one connection for single IP at the same time.
</aside>
<h2 id='data-format'>Data format</h2>
<p>The connecton are bi-directional, so client can send data to device and also will receive data from device. The actual payload are packed into a structured packet in the following format. And normally we define the payload send to device as <code>command</code> and payload received from device as <code>message</code>. The <code>command</code> all will begin with <code>MCU</code> and the <code>message</code> normally begin with <code>AXX</code> (except the <code>PAS</code> function), and then follow with function and param. The function and param are normally a 3 characters text, and add together with <code>+</code> mark, so the payload normally has 11 bytes length. And if the playload is longer than 11 bytes, you need to add an extra <code>&amp;</code> mark in the end. The command and message will have same function name, you need to remember the difference. </p>

<p>For example, when you send <code>MCU+VOL+050</code> to device, that means set current system volume to 50%, and when you received <code>AXX+VOL+050</code> and that means current device have volume 50%. </p>

<blockquote>
<p>sample packet with payload MCU+VOL+050</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>0x18 0x96 0x18 0x20
0x0b 0x00 0x00 0x00
0xc1 0x02 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x4d 0x43 0x55 0x2b 0x56 0x4f 0x4c 0x2b 0x30 0x35 0x30 
</code></pre></div>
<p><strong><em>Packet structure</em></strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>header</td>
<td>4</td>
<td><code>0x18 0x96 0x18 0x20</code></td>
</tr>
<tr>
<td>length</td>
<td>4</td>
<td>Length of the payload, little endian INT. eg: <code>0x0b 0x00 0x00 0x00</code> means 11 bytes payload.</td>
</tr>
<tr>
<td>checksum</td>
<td>4</td>
<td>Sum of all payload bytes, little endian INT.</td>
</tr>
<tr>
<td>reserved</td>
<td>8</td>
<td><code>0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00</code></td>
</tr>
<tr>
<td>payload</td>
<td>N</td>
<td>Command to device or message from device</td>
</tr>
</tbody></table>
<h2 id='payload'>Payload</h2>
<blockquote>
<p>set system volume to 50</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+VOL+050
</code></pre></div>
<blockquote>
<p>response message for system volume</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>AXX+VOL+050
</code></pre></div>
<p>The commands sent to device would start with <code>MCU+</code>, and then following 3 bytes major type, and then a mark <code>+</code> with a param or minor type or action, anyway. It would be <code>-</code> in some commands.</p>

<p>The message received from device would start with <code>AXX+</code>, and then following 3 bytes major type, and then mark <code>+</code>, and then param or response. </p>

<p>Normally the length of payload would be fixed 11 bytes. For some commands/messages which is longer than 11 bytes, it supposed to be ended with mark <code>&amp;</code>.</p>

<aside class="notice">
In the following document, will only describe the payload, you need to package it for full command data before sending over TCP.
</aside>
<h1 id='device-information'>Device Information</h1><h2 id='basic-information'>Basic Information</h2>
<blockquote>
<p>get device information</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+DEV+GET
</code></pre></div>
<blockquote>
<p>response message
<code>
AXX+DEV+INFSoundSysten_D1C2;release;SoundSysten_D1C2;52414B4F49545F52445F322E34;-36;0;0&amp;
</code></p>
</blockquote>

<p>The response of device information are seperated with <code>;</code>, and the description of each field:</p>

<table><thead>
<tr>
<th>Field in Sample</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>SoundSysten_D1C2</td>
<td>device name</td>
</tr>
<tr>
<td>release</td>
<td>firmware build type</td>
</tr>
<tr>
<td>SoundSysten_D1C2</td>
<td>device SSID which would be seen in hotspot or when setting up network</td>
</tr>
<tr>
<td>52414B4F49545F52445F322E34</td>
<td>SSID of connected AP <a href="https://developer.arylic.com/httpapi/#hexed-values">hexed string</a></td>
</tr>
<tr>
<td>-36</td>
<td>RSSI of current AP</td>
</tr>
<tr>
<td>0</td>
<td>unkown</td>
</tr>
<tr>
<td>0</td>
<td>unkown</td>
</tr>
</tbody></table>
<h2 id='more-information'>More Information</h2>
<blockquote>
<p>get device information</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+INF+GET
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+INF+INF{ "uuid": "FF31F09E8AFCEBECAF8BF24F", "DeviceName": "SoundSysten_D1C2", "GroupName": "SoundSysten_D1C2", "ssid": "SoundSysten_D1C2", "language": "en_us", "firmware": "4.6.415147", "hardware": "A31", "build": "release", "project": "Rakoso_SA100_V3", "priv_prj": "Rakoso_SA100_V3", "project_build_name": "a31rakoit", "Release": "20220427", "temp_uuid": "B4DE02F28DDB12B0", "hideSSID": "1", "SSIDStrategy": "2", "branch": "A31_stable_4.6", "group": "0", "wmrm_version": "4.2", "internet": "1", "MAC": "00:22:6C:1D:D1:C2", "STA_MAC": "00:22:6C:1D:D1:C4", "CountryCode": "CN", "CountryRegion": "1", "netstat": "2", "essid": "52414B4F49545F52445F322E34", "apcli0": "192.168.10.101", "eth2": "", "ra0": "10.10.10.254", "eth_dhcp": "1", "VersionUpdate": "0", "NewVer": "0", "set_dns_enable": "1", "mcu_ver": "42", "mcu_ver_new": "0", "dsp_ver": "0", "dsp_ver_new": "0", "date": "2023:12:25", "time": "09:03:12", "tz": "8.0000", "dst_enable": "1", "region": "unknown", "prompt_status": "1", "iot_ver": "1.0.0", "upnp_version": "1005", "cap1": "0x305200", "capability": "0x28e90b80", "languages": "0x6", "streams_all": "0xbef022e", "streams": "0xb88002e", "external": "0x0", "plm_support": "0x8016", "preset_key": "10", "spotify_active": "0", "lbc_support": "0", "privacy_mode": "0", "WifiChannel": "9", "RSSI": "-32", "BSSID": "6C:B1:58:35:94:A8", "battery": "0", "battery_percent": "0", "securemode": "1", "auth": "WPAPSKWPA2PSK", "encry": "AES", "upnp_uuid": "uuid:FF31F09E-8AFC-EBEC-AF8B-F24FFF31F09E", "uart_pass_port": "8899", "communication_port": "8819", "web_firmware_update_hide": "0", "ignore_talkstart": "0", "web_login_result": "-1", "silenceOTATime": "", "ignore_silenceOTATime": "1", "new_tunein_preset_and_alarm": "1", "iheartradio_new": "1", "new_iheart_podcast": "1", "tidal_version": "2.0", "service_version": "1.0", "ETH_MAC": "00:00:00:00:00:00", "security": "https\/2.0", "security_version": "2.0" }&amp;
AXX+SNG+INF{"curpos":"180157","totlen":"272000","status":"play","loop":"0"}&amp;
</code></pre></div>
<p>The response will contain most of the device information, and is same with the HTTPAPI getStatusEx.</p>
<h2 id='network-state'>Network State</h2>
<blockquote>
<p>get current internet state</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+WWW+GET
</code></pre></div>
<blockquote>
<p>response message </p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+WWW+001
</code></pre></div>
<p>To query current internet state of device. And when no internet connction, it would return <code>000</code>, otherwise <code>001</code>. </p>

<p>Device will send actively when status changed.</p>
<h2 id='usb-disk'>USB Disk</h2>
<blockquote>
<p>get status of usb device</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+USB+GET
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+USB+000
</code></pre></div>
<p>When no usb disk detected, it will return <code>000</code>, and when have detected usb disk plugin, will return with <code>001</code>. </p>

<p>Device will send actively when status changed. </p>
<h1 id='device-control'>Device control</h1><h2 id='volume'>Volume</h2>
<blockquote>
<p>get current volume</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+VOL+030
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+VOL+030
</code></pre></div>
<p>The param of <code>MUT</code> is an integer range from 0 to 100, for example, <code>030</code> is for volume 50. </p>

<p>You could send <code>MCU+VOL+GET</code> to get current system volume.</p>
<h2 id='mute'>Mute</h2>
<blockquote>
<p>mute</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+MUT+001
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+MUT+001
</code></pre></div>
<p>The param of <code>MUT</code> is either <code>000</code> or <code>001</code>, which is unmute or mute. </p>

<p>You could send <code>MCU+MUT+GET</code> to check current state.</p>
<h2 id='device-name'>Device Name</h2>
<blockquote>
<p>set device name to apple</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+NAM+SETapple&amp;
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+NAM+SETapple&amp;
</code></pre></div>
<p>When device name changed, you should see this changes on APP or else. And also when you change name on APP, the connected TCP client should also receive this change.</p>
<h2 id='device-reboot'>Device Reboot</h2>
<blockquote>
<p>reboot</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+DEV+RST&amp;
</code></pre></div>
<p>This command is used to reboot the WIFI module only. And the client connection would be lost.</p>
<h2 id='reset-factory-settings'>Reset Factory Settings</h2>
<blockquote>
<p>reset factory settings </p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+FACTORY
</code></pre></div>
<p>This will reset device to factory. And the client connection would be lost.</p>
<h1 id='playback-control'>Playback Control</h1><h2 id='playback-control-2'>Playback Control</h2>
<blockquote>
<p>pause current playback</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+PLY-PUS
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+PLY+000
</code></pre></div>
<p>Please note that the mark between type and param are <code>-</code>. And considering the different mark would affect the command, have added it with the param in the following table.</p>

<p>The responsed messages would just stand for the playback status, and might have no connection with the command sent.</p>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>-PUS</code></td>
<td>pause current playback</td>
</tr>
<tr>
<td><code>+PUS</code></td>
<td>toggle play and pause</td>
</tr>
<tr>
<td><code>-PLA</code></td>
<td>resume play, available only when paused</td>
</tr>
<tr>
<td><code>-STP</code></td>
<td>stop current playback</td>
</tr>
<tr>
<td><code>+NXT</code></td>
<td>next track, available only when play list</td>
</tr>
<tr>
<td><code>+PRV</code></td>
<td>previous track, available only when play list</td>
</tr>
<tr>
<td><code>+PUQ</code></td>
<td>start to play last playlist, available only when ever started playback on APP</td>
</tr>
</tbody></table>
<h2 id='playback-mode'>Playback Mode</h2>
<blockquote>
<p>set repeat one</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+PLP+001
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+PLP+001
</code></pre></div>
<p>The playback mode is defined as following:</p>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>000</code></td>
<td>repeat all</td>
</tr>
<tr>
<td><code>001</code></td>
<td>repeat one</td>
</tr>
<tr>
<td><code>002</code></td>
<td>repeat all and shuffle</td>
</tr>
<tr>
<td><code>003</code></td>
<td>shuffle</td>
</tr>
<tr>
<td><code>004</code></td>
<td>sequence</td>
</tr>
</tbody></table>

<p>You could send <code>MCU+PLP+GET</code> to query current mode.</p>
<h2 id='preset'>Preset</h2>
<blockquote>
<p>play preset #1</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+KEY+001
</code></pre></div>
<p>The device support 10 groups of presets, stands for the relative group shown on APP.</p>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>nnn</td>
<td>a number from 1 to 10, to play the preset playlist</td>
</tr>
<tr>
<td><code>NXT</code></td>
<td>play next preset playlist</td>
</tr>
<tr>
<td><code>PRE</code></td>
<td>play previous preset playlist</td>
</tr>
</tbody></table>

<blockquote>
<p>set current playlist to preset #2</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+PRE+002
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+PRE+FF2
</code></pre></div>
<p>This command will have effect only if the current source support preset. Some known working playlist: Spotify Connect, Internet Radio, TIDAL, QOBUZ.</p>
<h1 id='playback-information'>Playback Information</h1><h2 id='current-input-mode'>Current Input Mode</h2>
<blockquote>
<p>message from device when switch to LINE-IN</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+MEA+RDY
AXX+PLM+040
AXX+VOL+030
</code></pre></div>
<p>The param of <code>PLM</code> is the current playback source, and you could send <code>MCU+PLM+GET</code> to query current input. And response <code>MEA+RDY</code> means the media info is ready.</p>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>000</code></td>
<td>Idle</td>
</tr>
<tr>
<td><code>001</code></td>
<td>AirPlay</td>
</tr>
<tr>
<td><code>002</code></td>
<td>DLNA</td>
</tr>
<tr>
<td><code>010</code></td>
<td>online playlist</td>
</tr>
<tr>
<td><code>011</code></td>
<td>USB playlist</td>
</tr>
<tr>
<td><code>020</code></td>
<td>HTTP API</td>
</tr>
<tr>
<td><code>031</code></td>
<td>Spotify Connect</td>
</tr>
<tr>
<td><code>032</code></td>
<td>TIDAL Connect (A97 only)</td>
</tr>
<tr>
<td><code>040</code></td>
<td>LINE-IN</td>
</tr>
<tr>
<td><code>041</code></td>
<td>Bluetooth</td>
</tr>
<tr>
<td><code>045</code></td>
<td>Coaxial</td>
</tr>
<tr>
<td><code>047</code></td>
<td>LINE-IN 2</td>
</tr>
<tr>
<td><code>049</code></td>
<td>HDMI</td>
</tr>
<tr>
<td><code>051</code></td>
<td>USB DAC</td>
</tr>
<tr>
<td><code>053</code></td>
<td>External Bluetooth</td>
</tr>
<tr>
<td><code>054</code></td>
<td>Phono</td>
</tr>
<tr>
<td><code>056</code></td>
<td>Optical 2</td>
</tr>
<tr>
<td><code>057</code></td>
<td>Coaxial 2</td>
</tr>
<tr>
<td><code>058</code></td>
<td>ARC</td>
</tr>
<tr>
<td><code>099</code></td>
<td>Slave mode</td>
</tr>
</tbody></table>
<h2 id='media-information'>Media Information</h2>
<p>For media information, the base board will keep query the state. So the TCP client could just monitor the relative messages. And the MCU will only query in period, so client could try to send the query command to update immediately for the current status, and then monitor messages to update.</p>

<p>Another point need to be noted, the information might be not accurate, you need to test with the real condition to determine which one is more suitable. </p>
<h3 id='short'>Short</h3>
<blockquote>
<p>check current info</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+SONGGET
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+SNG+INF{"curpos":"3996","totlen":"229000","status":"play","loop":"0"}&amp;
</code></pre></div>
<p>This message is short, so normally used to query current progress.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>curpos</td>
<td>milliseconds of elapsed</td>
</tr>
<tr>
<td>totlen</td>
<td>milliseconds of duration</td>
</tr>
<tr>
<td>status</td>
<td>current playback status, might be <code>play</code>, <code>stop</code>, <code>pause</code></td>
</tr>
<tr>
<td>loop</td>
<td>loop/shuffle mode, please refer to the above Playback Mode</td>
</tr>
</tbody></table>
<h3 id='media-information-2'>Media Information</h3>
<blockquote>
<p>get media information</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+MEA+GET
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+MEA+DAT{ "title": "4865616C2054686520576F726C642E6D7033", "artist": "4D69636861656C204A61636B736F6E", "album": "4B696E67204F6620506F70", "vendor": "55506E50536572766572", "skiplimit": 0 }&amp;
</code></pre></div>
<p>This message will contain more information of current playback. The field <code>title</code>/<code>artist</code>/<code>album</code> should be comprehensive, and will list some known <code>vendor</code> below, the <code>skiplimit</code> is unkown. All messages are with format <a href="https://developer.arylic.com/httpapi/#hexed-values">hexed string</a>.</p>

<table><thead>
<tr>
<th>Vendor</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>QPlay</td>
<td>QPlay</td>
</tr>
<tr>
<td>Spotify</td>
<td>Spotify Connect</td>
</tr>
<tr>
<td>Airplay</td>
<td>AirPlay</td>
</tr>
<tr>
<td>UPnPServer</td>
<td>playlist in UPnP Share</td>
</tr>
<tr>
<td>Tidal</td>
<td>TIDAL</td>
</tr>
<tr>
<td>Rhapsody</td>
<td>Napster</td>
</tr>
<tr>
<td>Qobuz</td>
<td>QOBUZ</td>
</tr>
<tr>
<td>DEEZER</td>
<td>DEEZER</td>
</tr>
<tr>
<td>TUNEIN</td>
<td>Tune In</td>
</tr>
<tr>
<td>iheart</td>
<td>iHeart Radio</td>
</tr>
<tr>
<td>USBDiskQueue</td>
<td>USB Disk</td>
</tr>
<tr>
<td>vTuner</td>
<td>Internet Radio</td>
</tr>
<tr>
<td>_RemoteLocal</td>
<td>playlist on phone</td>
</tr>
<tr>
<td>CustomStream</td>
<td>Open Network Stream</td>
</tr>
<tr>
<td>RadioParadise</td>
<td>Radio Paradise</td>
</tr>
<tr>
<td>Prime</td>
<td>Amazon Music (A97)</td>
</tr>
<tr>
<td>CalmRadio</td>
<td>Calm Radio (A97)</td>
</tr>
<tr>
<td>SoundCloud</td>
<td>Sound Cloud (A97)</td>
</tr>
<tr>
<td>SoundMachine</td>
<td>Sound Machine (A97)</td>
</tr>
</tbody></table>
<h3 id='more-information-2'>More Information</h3>
<blockquote>
<p>get media information</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>MCU+PINFGET
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+PLY+INF{"type":"0","ch":"0","mode":"10","loop":"0","eq":"0","status":"play","curpos":"113756","offset_pts":"113798","totlen":"272000","Title":"4865616C2054686520576F726C642E6D7033","Artist":"4D69636861656C204A61636B736F6E","Album":"4B696E67204F6620506F70","alarmflag":"0","plicount":"7","plicurr":"2","vol":"28","mute":"0"}&amp;
</code></pre></div>
<p>This should be the most completed information for now playing status.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>unkown</td>
</tr>
<tr>
<td>ch</td>
<td>unkown</td>
</tr>
<tr>
<td>mode</td>
<td>input source, refer to above <code>PLM</code> mode</td>
</tr>
<tr>
<td>loop</td>
<td>loop/shuffle mode, please refer to the above Playback Mode</td>
</tr>
<tr>
<td>eq</td>
<td>unkown</td>
</tr>
<tr>
<td>status</td>
<td>current playback status, might be <code>play</code>, <code>stop</code>, <code>pause</code></td>
</tr>
<tr>
<td>curpos</td>
<td>milliseconds of elapsed</td>
</tr>
<tr>
<td>offset_pts</td>
<td>unkown</td>
</tr>
<tr>
<td>totlen</td>
<td>milliseconds of duration</td>
</tr>
<tr>
<td>Title</td>
<td>song title (hexed)</td>
</tr>
<tr>
<td>Artist</td>
<td>song artist (hexed)</td>
</tr>
<tr>
<td>Album</td>
<td>song album (hexed)</td>
</tr>
<tr>
<td>alarmflag</td>
<td>unkown</td>
</tr>
<tr>
<td>plicount</td>
<td>count of songs in playlist</td>
</tr>
<tr>
<td>plicurr</td>
<td>current index in playlist</td>
</tr>
<tr>
<td>vol</td>
<td>current volume</td>
</tr>
<tr>
<td>mute</td>
<td>mute status</td>
</tr>
</tbody></table>
<h2 id='spotify-status'>Spotify Status</h2>
<blockquote>
<p>message from device when spotify started</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>AXX+SPY+001
</code></pre></div>
<p>The <code>SPY</code> message will have param <code>000</code> when spotify stopped, and <code>001</code> when spotify started.</p>
<h1 id='passthrough-function'>Passthrough Function</h1>
<p>The device is composed with 2 parts, the WiFi module and the base board. The basic functions described above will work with the WiFi module, so all devices have the same WiFi module (for example A31) will have same API. </p>

<p>And the passthrough function which is used for the client to communicate with the MCU on base board directly, and which have an extended function set which will work with the base board and might be different for various models. </p>
<h2 id='extended-eq-function'>Extended EQ function</h2>
<blockquote>
<p>sample command</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+PAS+EQGet&amp;
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+PAS+EQ:bass:05&amp;MCU+PAS+EQ:treble:05&amp;
</code></pre></div>
<table><thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>EQGet</td>
<td>query current EQ, no param</td>
</tr>
<tr>
<td>EQSet:{type}:{value}</td>
<td>set EQ</td>
</tr>
<tr>
<td>EQ:{type}:{value}</td>
<td>current EQ</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>{type}</td>
<td>will be <code>treble</code> or <code>bass</code></td>
</tr>
<tr>
<td>{value}</td>
<td>a number 0 ~ 10 which stands for -5 ~ 5 on APP (actually gain -10dB ~ +10 dB).</td>
</tr>
</tbody></table>
<h2 id='ap8064-platform'>AP8064 platform</h2>
<blockquote>
<p>sample command</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+PAS+Rakoit:GetBoard&amp;
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+PAS+Rakoit:Board:A50C&amp;
</code></pre></div>
<p>Models including the PRO v1/2, AMP v1/v2 and some A50/S50 are based on an old platform AP8064. Commands will be sent as param of <code>PAS</code> with an identifier: <code>Rakoit:</code>. </p>

<table><thead>
<tr>
<th>Command</th>
<th>Ver</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>GetBoard</code></td>
<td>0</td>
<td>get current board ID</td>
</tr>
<tr>
<td><code>GetCommit</code></td>
<td>0</td>
<td>get git commit</td>
</tr>
<tr>
<td><code>GetPrompt</code></td>
<td>0</td>
<td>get current voice prompt settings</td>
</tr>
<tr>
<td><code>SetPrompt:{pmt}</code></td>
<td>0</td>
<td>enable/disable voice prompt, {pmt} should be 0 or 1</td>
</tr>
<tr>
<td><code>GetAPIVer</code></td>
<td>1</td>
<td>get API version</td>
</tr>
<tr>
<td><code>SendKey:{key}</code></td>
<td>1</td>
<td>send key</td>
</tr>
<tr>
<td><code>MaxVolume:Get</code></td>
<td>2</td>
<td>get max volume</td>
</tr>
<tr>
<td><code>MaxVolume:{mxv}</code></td>
<td>2</td>
<td>set max volume</td>
</tr>
<tr>
<td><code>VB:INT:{vb_int}</code></td>
<td>2</td>
<td>set intensity of virtual bass</td>
</tr>
<tr>
<td><code>VB:ENH:{vb_enh}</code></td>
<td>2</td>
<td>set enhance of virtual bass</td>
</tr>
<tr>
<td><code>VB:SWI</code></td>
<td>2</td>
<td>toggle virtual bass</td>
</tr>
<tr>
<td><code>VB:Get</code></td>
<td>2</td>
<td>get on/off state of virtual bass</td>
</tr>
<tr>
<td><code>VB:{en}</code></td>
<td>2</td>
<td>turn on/off virtual bass</td>
</tr>
<tr>
<td><code>LED:{en}</code></td>
<td>2</td>
<td>turn on/off LED</td>
</tr>
</tbody></table>
<h2 id='bp10xx-platform'>BP10XX platform</h2>
<blockquote>
<p>sample command</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+PAS+RAKOIT:VOL&amp;
</code></pre></div>
<blockquote>
<p>response message</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>MCU+PAS+RAKOIT:VOL:50&amp;
</code></pre></div>
<p>Models including MINI V3, PRO v3, AMP v3 and newer are based on platform BP10XX. Command will be sent as param of <code>PAS</code> with an identifier: <code>RAKOIT:</code>.  eg: to query system volume, you can send payload <code>MCU+PAS+RAKOIT:VOL&amp;</code>, and will receive message with payload <code>MCU+PAS+RAKOIT:VOL:50&amp;</code>. The extended passthrough function will have some abundant functions with the basic WiFi function, as it shares with the same command set with the UART interface. </p>

<p>For more command details, please refer to <a href="https://developer.arylic.com/uartapi">UART API</a>.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
